<!DOCTYPE html>
<html lang="cs">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0">
<title>27sun ‚Äì Video editor & photographer</title>
<link href="https://fonts.googleapis.com/css2?family=UnifrakturCook:wght@700&family=Inter:wght@300;400;500;600&display=swap" rel="stylesheet">
<style>
*{margin:0;padding:0;box-sizing:border-box;-webkit-tap-highlight-color:transparent}
body{font-family:Inter,Arial,sans-serif;background:#0a0a0a;color:#f2f2f2;overflow-x:hidden;line-height:1.5}

body::before{
  content:"";
  position:fixed;
  inset:0;
  background: 
    radial-gradient(circle at calc(5% + (var(--scroll, 0) * 0.9%)) calc(5% + (var(--scroll, 0) * 0.7%)), rgba(255,122,24,0.15), transparent 60%),
    linear-gradient(to bottom, rgba(10,10,10,.85), rgba(10,10,10,.95)),
    repeating-linear-gradient(to right, rgba(255,255,255,.02) 0, rgba(255,255,255,.02) 1px, transparent 1px, transparent 140px);
  z-index:-1;
  pointer-events: none;
  transform: translateZ(0);
}

section{padding:80px 6%; position: relative;}
h2{font-size:clamp(24px, 5vw, 32px);font-weight:500;margin-bottom:15px;letter-spacing:1px}
h3{opacity:.7;margin-bottom:10px;font-weight:500}
.top-bar{position:fixed;top:0;width:100%;height:80px;background:rgba(10,10,10,.8);backdrop-filter:blur(12px);-webkit-backdrop-filter:blur(12px);display:flex;align-items:center;justify-content:center;z-index:1000;border-bottom:1px solid rgba(255,255,255,0.05)}
.top-bar img{height:55px;width:auto;border-radius:10px}
.lang-switch{position:absolute;right:15px}.lang-switch button{background:none;border:1px solid rgba(255,255,255,.2);color:rgba(255,255,255,.5);padding:5px 12px;margin-left:4px;border-radius:999px;cursor:pointer;font-size:12px;transition:.3s;font-weight:600}
.lang-switch button.active{background:#ff7a18;color:#000;border-color:#ff7a18}

/* GAME STYLES */
.game-overlay { position: fixed; inset: 0; background: rgba(0,0,0,0.92); display: none; align-items: center; justify-content: center; z-index: 2000; backdrop-filter: blur(15px); }
.game-content { background: #111; border: 1px solid #ff7a18; padding: 40px; border-radius: 30px; width: 90%; max-width: 500px; text-align: center; position: relative; }
#game-area { height: 300px; background: rgba(255,255,255,0.02); border-radius: 15px; position: relative; overflow: hidden; margin-top: 20px; cursor: crosshair; border: 1px solid rgba(255,255,255,0.05); transition: background 0.1s; }
#game-area.miss-active { background: rgba(255, 74, 74, 0.3) !important; }
.target { position: absolute; width: 45px; height: 45px; background: #ff7a18; border-radius: 8px; display: flex; align-items: center; justify-content: center; font-size: 24px; cursor: pointer; animation: popIn 0.15s; z-index: 5; }
.hit-anim { position: absolute; color: #4caf50; font-weight: bold; font-size: 20px; pointer-events: none; animation: pointUp 0.6s ease-out forwards; z-index: 10; }

@keyframes popIn { from { transform: scale(0); } to { transform: scale(1); } }
@keyframes pointUp { 
  0% { transform: translateY(0); opacity: 1; } 
  100% { transform: translateY(-40px); opacity: 0; } 
}

.loot-box { width: 100px; height: 100px; margin: 30px auto; position: relative; cursor: pointer; }
.box-body { position: absolute; bottom: 0; width: 100%; height: 60%; background: #ff7a18; border-radius: 5px; }
.box-lid { position: absolute; top: 15%; width: 110%; left: -5%; height: 25%; background: #fff; border-radius: 5px; z-index: 2; transition: 0.5s; }
.loot-box.open .box-lid { transform: translateY(-30px) rotate(-10deg); opacity: 0; }

.btn{display:inline-block;margin-top:30px;padding:14px 35px;border-radius:999px;background:#ff7a18;color:#000!important;text-decoration:none;font-weight:600;transition:.2s; border:none; cursor:pointer;}
</style>
</head>
<body>

<div class="top-bar">
  <img src="logo.PNG" alt="Logo">
  <div class="lang-switch">
    <button id="btn-cs" class="active" onclick="setLang('cs')">CZ</button>
    <button id="btn-en" onclick="setLang('en')">EN</button>
  </div>
</div>

<section style="text-align:center; padding-top:150px;">
  <div class="logo" style="font-family:'UnifrakturCook',cursive;font-size:80px;">27sun</div>
  <a href="javascript:void(0)" onclick="openGame()" class="btn">üéÆ Hr√°t o slevy</a>
</section>

<div id="game-modal" class="game-overlay">
  <div class="game-content">
    <button onclick="closeGame()" style="position:absolute;top:15px;right:20px;background:none;border:none;color:#fff;font-size:30px;cursor:pointer;opacity:0.5;">&times;</button>
    
    <div id="game-start-screen">
      <h2 id="g-title">27sun Challenge</h2>
      <p style="margin: 15px 0; opacity: 0.8; font-size: 14px;">
        Tref 27 fo≈•√°k≈Ø! Rychlost se zvy≈°uje.<br>
        <b style="color:#ff4a4a">Kliknut√≠ vedle = -1 sekunda.</b>
      </p>
      <button class="btn" onclick="startGame()">Start</button>
    </div>

    <div id="game-play-screen" style="display:none">
      <div style="display:flex;justify-content:space-between;margin-bottom:10px;font-weight:600;">
        <div>Body: <span id="current-score" style="color:#ff7a18">0</span> / 27</div>
        <div id="game-timer" style="color:#ff4a4a">00:60</div>
      </div>
      <div id="game-area" onclick="handleMiss(event)"></div>
    </div>

    <div id="game-win-screen" style="display:none">
      <h2 style="color:#ff7a18">V√ùHRA!</h2>
      <div class="loot-box" id="loot-box" onclick="openBox()">
        <div class="box-lid"></div><div class="box-body"></div>
      </div>
      <p>Klikni na box</p>
      <div id="reward-display" style="display:none">
        <div id="reward-amount" style="font-size:24px; font-weight:800; color:#ff7a18; margin:15px 0;"></div>
        <p style="font-size:12px; opacity:0.6">K√≥d: <b id="promo-code"></b></p>
      </div>
    </div>
  </div>
</div>

<script>
let score = 0;
let timeLeft = 60;
let gameTimer;
let countdownInterval;
let currentSpeed = 1000; // Poƒç√°teƒçn√≠ rychlost (1s)

function openGame() { document.getElementById('game-modal').style.display = 'flex'; resetGame(); }
function closeGame() { document.getElementById('game-modal').style.display = 'none'; stopGame(); }

function resetGame() {
    score = 0; timeLeft = 60; currentSpeed = 1000;
    document.getElementById('current-score').innerText = score;
    document.getElementById('game-timer').innerText = "00:60";
    document.getElementById('game-start-screen').style.display = 'block';
    document.getElementById('game-play-screen').style.display = 'none';
    document.getElementById('game-win-screen').style.display = 'none';
    stopGame();
}

function stopGame() { clearTimeout(gameTimer); clearInterval(countdownInterval); }

function startGame() {
    document.getElementById('game-start-screen').style.display = 'none';
    document.getElementById('game-play-screen').style.display = 'block';
    startCountdown();
    spawnTarget();
}

function startCountdown() {
    countdownInterval = setInterval(() => {
        timeLeft--;
        document.getElementById('game-timer').innerText = `00:${timeLeft.toString().padStart(2, '0')}`;
        if (timeLeft <= 0) { stopGame(); alert("ƒåas vypr≈°el!"); resetGame(); }
    }, 1000);
}

// Penalizace POUZE p≈ôi kliknut√≠ vedle
function handleMiss(e) {
    if (e.target.id === 'game-area') {
        timeLeft = Math.max(0, timeLeft - 1);
        document.getElementById('game-timer').innerText = `00:${timeLeft.toString().padStart(2, '0')}`;
        
        const area = document.getElementById('game-area');
        area.classList.remove('miss-active');
        void area.offsetWidth;
        area.classList.add('miss-active');
    }
}

function spawnTarget() {
    const area = document.getElementById('game-area');
    area.innerHTML = '';

    if (score >= 27) { winGame(); return; }

    const target = document.createElement('div');
    target.className = 'target';
    target.innerHTML = 'üì∑';
    
    const x = Math.random() * (area.clientWidth - 50);
    const y = Math.random() * (area.clientHeight - 50);
    target.style.left = x + 'px';
    target.style.top = y + 'px';

    let clicked = false;
    target.onclick = function(e) {
        e.stopPropagation();
        clicked = true;
        score++;
        document.getElementById('current-score').innerText = score;
        
        // Animace +1
        showPointAnim(x, y);
        
        // Zrychlen√≠ (o 30ms s ka≈æd√Ωm bodem, minimum 300ms)
        currentSpeed = Math.max(300, 1000 - (score * 30));
        
        spawnTarget();
    };

    area.appendChild(target);

    clearTimeout(gameTimer);
    gameTimer = setTimeout(() => {
        if (!clicked) spawnTarget(); // Pokud zmiz√≠ s√°m, neodeƒç√≠t√° se ƒças
    }, currentSpeed);
}

function showPointAnim(x, y) {
    const anim = document.createElement('div');
    anim.className = 'hit-anim';
    anim.innerText = '+1';
    anim.style.left = x + 'px';
    anim.style.top = y + 'px';
    document.getElementById('game-area').appendChild(anim);
    setTimeout(() => anim.remove(), 600);
}

function winGame() {
    stopGame();
    document.getElementById('game-play-screen').style.display = 'none';
    document.getElementById('game-win-screen').style.display = 'block';
}

function openBox() {
    document.getElementById('loot-box').classList.add('open');
    const rewards = [10, 20, 50, 100];
    const win = rewards[Math.floor(Math.random()*rewards.length)];
    document.getElementById('reward-amount').innerText = `Sleva ${win}%`;
    document.getElementById('promo-code').innerText = `27SUN-${win}`;
    document.getElementById('reward-display').style.display = 'block';
}

function setLang(l) {
    document.querySelectorAll('.lang-switch button').forEach(b => b.classList.remove('active'));
    document.getElementById('btn-'+l).classList.add('active');
}
</script>
</body>
</html>
